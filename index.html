<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LAILA.ONE | Creative Intelligence Engine</title>

<link rel="icon" href="favicon.png" />
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

<style>
/* ===== COLORS & ROOT ===== */
:root {
  --accent-1: #a855f7;
  --accent-2: #22d3ee;
  --text-main: #f9fafb;
  --text-muted: #9ca3af;
  --border-subtle: rgba(255,255,255,0.06);
  --radius-xl: 24px;
  --radius-lg: 18px;
  --shadow-soft: 0 24px 80px rgba(0,0,0,0.65);
  --trans: 0.2s ease-out;
}

/* ===== GLOBAL & RESET ===== */
html, body {
  margin:0; padding:0; width:100%; min-height:100%;
  font-family:"Montserrat",sans-serif;
  background: radial-gradient(circle at top left,#111827 0,#020617 42%,#000 80%);
  color: var(--text-main);
}
main { padding:24px 20px; opacity:0; transform:translateY(40px); animation:fadeInUp 0.8s ease-out forwards 0.5s; }

/* ===== ORBS ===== */
.orb {
  position:fixed; filter:blur(60px); opacity:0.75; pointer-events:none; z-index:-1;
}
.orb--purple { width:340px;height:340px; background:radial-gradient(circle,rgba(168,85,247,0.8),transparent 70%); top:-80px; right:-60px; }
.orb--cyan   { width:320px;height:320px; background:radial-gradient(circle,rgba(56,189,248,0.8),transparent 70%); bottom:-100px; left:-40px; }

/* â€¦ (Ø§Ø­ÙØ¸ Ø¨Ø§Ù‚ÙŠ CSS Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯Ùƒ ÙƒÙ…Ø§ Ù‡Ùˆ) */
img.preview {
  max-width: 180px;
  margin-top: 12px;
  border-radius: var(--radius-md);
  border: 1px solid rgba(148,163,184,0.4);
}
</style>
</head>
<body>

<div class="orb orb--purple"></div>
<div class="orb orb--cyan"></div>

<!-- Spinner -->
<div id="spinnerOverlay" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;flex-direction:column;z-index:9999;">
  <div class="spinner" style="border:6px solid rgba(255,255,255,0.2);border-top:6px solid var(--accent-2);border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;"></div>
  <div id="spinnerText" style="margin-top:12px;font-size:14px;color:var(--accent-2);font-weight:500;">Loading...</div>
</div>

<main>
  <!-- â€¦ NAV + HERO â€¦ (Ø²ÙŠ Ù…Ø§ Ø¹Ù†Ø¯Ùƒ) -->

  <div class="playground">
    <!-- â€¦ existing fields â€¦ -->

    <div class="upload-area">
      <div class="upload-header">
        <div class="upload-icon">ğŸ“·</div>
      </div>

      <label class="upload-btn">
        Choose File <input type="file" id="imageInput" accept="image/*" style="display:none;"/>
      </label>

      <!-- âœ¨ Ù‡Ù†Ø§ Ù‡Ù†Ø´ÙˆÙ Ø§Ù„ØµÙˆØ±Ø© Ù‚Ø¨Ù„ Ø§Ù„ÙˆØµÙ -->
      <img id="imgPreview" class="preview" src="" alt="" style="display:none;"/>

      <button class="btn-compact" id="btnDescribe">Describe image</button>
    </div>

    <!-- Output Panel -->
    <div class="output-panel">
      <div class="output-header">
        <div id="outputTitle">LAILA Output</div>
        <div class="status-pill">
          <div class="status-dot"></div><div id="statusText">Idle</div>
        </div>
      </div>
      <div id="outputBody" style="margin-top:10px;font-size:12px;color:var(--text-muted);">
        Type a prompt or upload an image.
      </div>
    </div>
  </div>

</main>

<script>
// Language translations
const translations = {
  en: {
    statusIdle: "Idle",
    noImage: "Please upload an image first.",
    errorDesc: "Error processing image."
  },
  ar: {
    statusIdle: "ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",
    noImage: "ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø£ÙˆÙ„Ù‹Ø§.",
    errorDesc: "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©."
  }
};
let currentLang = "en";

// SHOW PREVIEW IMAGE
const imgInput = document.getElementById("imageInput");
const imgPreview = document.getElementById("imgPreview");
imgInput.addEventListener("change", () => {
  const file = imgInput.files[0];
  if (!file) {
    imgPreview.style.display = "none";
    return;
  }
  const url = URL.createObjectURL(file);
  imgPreview.src = url;
  imgPreview.style.display = "block";
});

// SPINNER CONTROLS
const spinner = document.getElementById("spinnerOverlay");
const spinnerText = document.getElementById("spinnerText");
function showProgress(text) {
  spinnerText.textContent = text;
  spinner.style.display = "flex";
}
function hideProgress() {
  spinner.style.display = "none";
}

// DESCRIBE IMAGE
document.getElementById("btnDescribe").addEventListener("click", async () => {
  const file = imgInput.files[0];
  if (!file) {
    alert(translations[currentLang].noImage);
    return;
  }

  showProgress(currentLang==="en"?"Describing image...":"Ø¬Ø§Ø±ÙŠ ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©...");

  const formData = new FormData();
  formData.append("image", file);

  try {
    const res = await fetch("https://laila-backend.onrender.com/describe-image", {
      method: "POST",
      body: formData
    });
    const data = await res.json();

    document.getElementById("outputBody").textContent =
      data.description || (currentLang==="en"?"No description returned.":"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆØµÙ.");

  } catch (err) {
    document.getElementById("outputBody").textContent =
      translations[currentLang].errorDesc;
    console.error(err);
  } finally {
    hideProgress();
  }
});
</script>

</body>
</html>

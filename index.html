<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LAILA.ONE | Creative Intelligence Engine</title>

  <link rel="icon" href="favicon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    :root {
      --accent-1: #a855f7;
      --accent-2: #22d3ee;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-subtle: rgba(255,255,255,0.06);
      --radius-xl: 24px;
      --radius-lg: 18px;
      --shadow-soft: 0 24px 80px rgba(0,0,0,0.65);
      --trans: 0.2s ease-out;
    }

    html, body {
      margin:0; padding:0; width:100%; min-height:100%;
      font-family:"Montserrat",sans-serif;
      background: radial-gradient(circle at top left,#111827 0,#020617 42%,#000 80%);
      color: var(--text-main);
    }

  main {
  padding: 24px 20px;
  opacity: 1;
  transform: none;
}

    .orb {
      position:fixed;
      filter:blur(60px);
      opacity:0.75;
      pointer-events:none;
      z-index:-1;
    }
    .orb--purple {
      width:340px;height:340px;
      background:radial-gradient(circle,rgba(168,85,247,0.8),transparent 70%);
      top:-80px; right:-60px;
    }
    .orb--cyan {
      width:320px;height:320px;
      background:radial-gradient(circle,rgba(56,189,248,0.8),transparent 70%);
      bottom:-100px; left:-40px;
    }

    .nav {
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .nav-left {
      display:flex;
      gap:14px;
      align-items:center;
    }
    .logo-mark {
      width:38px;height:38px;
      border-radius:50%;
      background:radial-gradient(circle at 20% 20%,#e5e7eb,#020617);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .logo-mark span {
      font-weight:700;
      font-size:15px;
      color:#020617;
    }
    .logo-title {
      font-size:17px;
      font-weight:600;
      text-transform:uppercase;
    }
    .logo-sub {
      font-size:11px;
      color:var(--text-muted);
      text-transform:uppercase;
    }
    .btn-outline {
      padding:10px 16px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      background:rgba(15,23,42,0.9);
      color:var(--text-main);
      cursor:pointer;
      font-size:12px;
      text-transform:uppercase;
      transition:all var(--trans);
    }

    .main-title {
      font-size:36px;
      text-align:center;
      margin-top:32px;
    }
    .main-title span {
      background:linear-gradient(120deg,var(--accent-2),var(--accent-1));
      -webkit-background-clip:text;
      color:transparent;
    }

    .playground {
      margin-top:40px;
      padding:24px;
      border-radius:var(--radius-xl);
      background:linear-gradient(145deg,rgba(15,23,42,0.98),#020617);
      border:1px solid var(--border-subtle);
      box-shadow:var(--shadow-soft);
      max-width:1100px;
      margin:auto;
    }

    .upload-area {
      border-radius:var(--radius-lg);
      border:1px dashed rgba(148,163,184,0.6);
      background:rgba(15,23,42,0.9);
      padding:16px;
      margin-top:24px;
    }

    .upload-btn {
      display:inline-block;
      padding:6px 12px;
      border-radius:999px;
      background:rgba(15,23,42,0.95);
      border:1px solid rgba(148,163,184,0.6);
      color:var(--text-main);
      cursor:pointer;
    }

    .btn-compact {
      font-size:11px;
      padding:8px 14px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      background:rgba(15,23,42,0.95);
      color:var(--text-main);
      cursor:pointer;
      margin:6px 4px 0 0;
    }

    .output-panel {
      margin-top:30px;
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.4);
      background:rgba(15,23,42,0.9);
      padding:16px;
    }

    img.preview {
      max-width: 180px;
      margin-top: 12px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.4);
      display: none;
    }

    #spinnerOverlay {
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.6);
      display:none;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      z-index:9999;
    }
    .spinner {
      border:6px solid rgba(255,255,255,0.2);
      border-top:6px solid var(--accent-2);
      border-radius:50%;
      width:50px; height:50px;
      animation:spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes fadeInUp {
      from {opacity: 0; transform: translateY(40px);}
      to {opacity: 1; transform: translateY(0);}
    }
  </style>
</head>
<body>

<div class="orb orb--purple"></div>
<div class="orb orb--cyan"></div>

<div id="spinnerOverlay">
  <div class="spinner"></div>
  <div id="spinnerText">Loading...</div>
</div>

<main>
  <div class="nav">
    <div class="nav-left">
      <div class="logo-mark"><span>L</span></div>
      <div class="logo-text">
        <div class="logo-title">LAILA.ONE</div>
        <div class="logo-sub">Creative Intelligence Engine</div>
      </div>
    </div>
    <button class="btn-outline" id="langToggle">AR</button>
  </div>

  <h1 class="main-title" id="mainTitle">
    Turn any idea into a ready-to-use AI prompt
  </h1>

  <div class="playground">
    <div class="upload-area">
      <label class="upload-btn">
        Choose File
        <input type="file" id="imageInput" accept="image/*" style="display:none;">
      </label>

      <img id="imgPreview" class="preview" alt="Preview"/>

      <button class="btn-compact" id="btnDescribe">Describe image</button>
    </div>

    <div class="output-panel">
      <div class="output-header">
        <div id="outputTitle">LAILA Output</div>
        <div class="status-pill">
          <div class="status-dot"></div><div id="statusText">Idle</div>
        </div>
      </div>
      <div id="outputBody" style="margin-top:10px;font-size:12px;color:var(--text-muted);">
        Type a prompt or upload an image.
      </div>
    </div>
  </div>
</main>

<script>
const translations = {
  en: {
    statusIdle: "Idle",
    noImage: "Please upload an image first.",
    errorDesc: "Error processing image."
  },
  ar: {
    statusIdle: "في وضع الانتظار",
    noImage: "يرجى رفع صورة أولًا.",
    errorDesc: "حدث خطأ أثناء تحليل الصورة."
  }
};

let currentLang = "en";
document.getElementById("langToggle").addEventListener("click", () => {
  currentLang = currentLang === "en" ? "ar" : "en";
  document.getElementById("langToggle").textContent = currentLang === "en" ? "AR" : "EN";
});

const imgInput = document.getElementById("imageInput");
const imgPreview = document.getElementById("imgPreview");

imgInput.addEventListener("change", () => {
  const file = imgInput.files[0];
  if (file) {
    const url = URL.createObjectURL(file);
    imgPreview.src = url;
    imgPreview.style.display = "block";
  }
});

const spinner = document.getElementById("spinnerOverlay");
const spinnerText = document.getElementById("spinnerText");
function showProgress(text) {
  spinnerText.textContent = text;
  spinner.style.display = "flex";
}
function hideProgress() {
  spinner.style.display = "none";
}

document.getElementById("btnDescribe").addEventListener("click", async () => {
  const file = imgInput.files[0];
  if (!file) {
    alert(translations[currentLang].noImage);
    return;
  }

  showProgress(currentLang === "en" ? "Describing image..." : "جاري وصف الصورة...");

  const formData = new FormData();
  formData.append("image", file);

  try {
    const res = await fetch("https://laila-backend.onrender.com/describe-image", {
      method: "POST",
      body: formData
    });

    const data = await res.json();
    document.getElementById("outputBody").textContent =
      data.description || (currentLang === "en" ? "No description returned." : "لم يتم الحصول على وصف.");
  } catch (err) {
    document.getElementById("outputBody").textContent = translations[currentLang].errorDesc;
  } finally {
    hideProgress();
  }
});
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <link rel="icon" type="image/svg+xml" href="favicon-events.svg">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LAILA | Events</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-main:#0e0f14;
      --bg-soft:#151722;
      --accent:#8b8df8;
      --accent-soft:#6f72e6;
      --text:#ffffff;
      --muted:rgba(255,255,255,0.74);
      --border:rgba(255,255,255,0.08);
      --shadow: 0 18px 60px rgba(0,0,0,0.45);
      --radius:18px;
      --radius-lg:22px;
      --ease:cubic-bezier(.2,.8,.2,1);
    }

    *{margin:0;padding:0;box-sizing:border-box;font-family:"Montserrat",sans-serif;}
    body{
      background: radial-gradient(circle at top, #1a1c2d, var(--bg-main));
      color:var(--text);
      min-height:100vh;
      overflow-x:hidden;
    }

    .bg-glow{
      position:fixed; inset:-200px;
      background:
        radial-gradient(closest-side, rgba(139,141,248,0.14), transparent 60%) 10% 20%/520px 520px,
        radial-gradient(closest-side, rgba(111,114,230,0.10), transparent 60%) 85% 30%/560px 560px,
        radial-gradient(closest-side, rgba(139,141,248,0.08), transparent 60%) 50% 95%/620px 620px;
      pointer-events:none;
      z-index:-1;
      animation: floatGlow 10s var(--ease) infinite alternate;
      opacity:0.9;
    }
    @keyframes floatGlow{
      from{transform:translate3d(0,0,0) scale(1);}
      to{transform:translate3d(0,-18px,0) scale(1.03);}
    }

    header{
      position:sticky; top:0; z-index:50;
      display:flex; align-items:center; justify-content:space-between;
      padding:16px 18px;
      border-bottom:1px solid var(--border);
      background: rgba(14,15,20,0.70);
      backdrop-filter: blur(14px);
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:700; letter-spacing:2px; font-size:1.05rem; user-select:none;
    }
    .brand .dot{
      width:10px;height:10px;border-radius:50%;
      background: linear-gradient(135deg, var(--accent), var(--accent-soft));
      box-shadow: 0 0 0 6px rgba(139,141,248,0.12), 0 0 26px rgba(139,141,248,0.35);
    }
    nav{display:flex; align-items:center; gap:18px;}
    nav a{
      color:var(--muted); text-decoration:none; font-size:0.92rem;
      padding:10px 10px; border-radius:999px;
      transition: transform .18s var(--ease), color .18s var(--ease), background .18s var(--ease);
    }
    nav a:hover{
      color:var(--text);
      background: rgba(255,255,255,0.04);
      transform: translateY(-1px);
      box-shadow: 0 0 0 1px rgba(139,141,248,0.14) inset;
    }
    nav a.active{
      color:var(--text);
      background: rgba(139,141,248,0.10);
      box-shadow: 0 0 0 1px rgba(139,141,248,0.22) inset, 0 14px 38px rgba(0,0,0,0.35);
    }

    main{max-width:1100px; margin:0 auto; padding:42px 18px 80px;}
    .fade-in{animation: fadeIn 520ms var(--ease) both;}
    @keyframes fadeIn{from{opacity:0; transform:translateY(8px);} to{opacity:1; transform:none;}}

    .hero{
      text-align:center;
      padding:42px 10px 14px;
      max-width:900px;
      margin:0 auto;
    }
    .hero h1{
      font-size:2.05rem; line-height:1.25; letter-spacing:0.2px; margin-bottom:10px;
    }
    .hero p{
      color:var(--muted); font-size:0.98rem; line-height:1.75;
      margin:0 auto; max-width:760px;
    }

    .toolbar{
      margin:18px auto 0;
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      max-width:900px;
    }
    .pill{
      border:1px solid var(--border);
      background: rgba(255,255,255,0.03);
      color: var(--text);
      padding:10px 14px;
      border-radius:999px;
      font-size:0.88rem;
      display:inline-flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 0 0 1px rgba(139,141,248,0.08) inset;
    }
    .pill input{
      all:unset;
      width:220px;
      color:var(--text);
      font-size:0.88rem;
      opacity:0.95;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
      margin-top:26px;
    }

    .card{
      background: rgba(21,23,34,0.86);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding:18px 18px;
      text-align:left;
      position:relative;
      overflow:hidden;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), border-color .18s var(--ease);
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-60% -30%;
      background: radial-gradient(circle at 30% 30%, rgba(139,141,248,0.18), transparent 55%);
      opacity:0;
      transition: opacity .18s var(--ease);
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(139,141,248,0.18);
      box-shadow: 0 26px 80px rgba(0,0,0,0.45);
    }
    .card:hover::before{opacity:1;}

    .row{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }
    .title{
      font-weight:700;
      font-size:1.05rem;
      line-height:1.35;
    }
    .meta{
      margin-top:8px;
      color:var(--muted);
      font-size:0.88rem;
      line-height:1.6;
    }
    .tag{
      margin-left:auto;
      font-size:0.78rem;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.03);
      color:rgba(255,255,255,0.85);
      white-space:nowrap;
    }

    .actions{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .btn{
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border);
      color: var(--text);
      font-size:0.9rem;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), background .18s var(--ease);
    }
    .btn:hover{
      transform: translateY(-1px);
      box-shadow: 0 0 0 1px rgba(139,141,248,0.16) inset, 0 18px 60px rgba(0,0,0,0.35);
      background: rgba(139,141,248,0.08);
    }

    .footer{
      margin-top:34px;
      text-align:center;
      color:rgba(255,255,255,0.6);
      font-size:0.82rem;
    }
    .glow-line{
      height:1px;
      width:min(720px, 92%);
      margin:22px auto 12px;
      background: linear-gradient(90deg,
        transparent,
        rgba(139,141,248,0.6),
        rgba(111,114,230,0.85),
        rgba(139,141,248,0.6),
        transparent
      );
      filter: drop-shadow(0 0 16px rgba(139,141,248,0.45));
      background-size: 220% 100%;
      animation: lineMove 5.5s var(--ease) infinite;
      opacity:0.9;
      border-radius:999px;
    }
    @keyframes lineMove{
      0%{background-position: 0% 0%;}
      50%{background-position: 100% 0%;}
      100%{background-position: 0% 0%;}
    }

    .empty{
      text-align:center;
      color:var(--muted);
      margin-top:18px;
      font-size:0.95rem;
    }

    @media(min-width:768px){
      header{padding:16px 26px;}
      main{padding:52px 26px 90px;}
      .hero h1{font-size:3rem;}
      .grid{grid-template-columns: repeat(2, 1fr); gap:16px;}
    }
  </style>
</head>

<body>
  <div class="bg-glow"></div>

  <header>
    <div class="brand"><span class="dot"></span><span>LAILA</span></div>

    <nav>
      <a href="index.html">Home</a>
      <a href="archive.html">Archive</a>
      <a href="learn.html">Learn</a>
      <a href="assistant.html">AI Assistant</a>
      <a class="active" href="events.html">Events</a>
    </nav>
  </header>

  <main class="fade-in">
    <section class="hero">
      <h1>Events</h1>
      <p>Auto-updated list of upcoming rhythmic gymnastics events. This page reads from <code>data/events.json</code> generated by a scheduled workflow.</p>

      <div class="toolbar">
        <div class="pill">
          Search:
          <input id="q" type="text" placeholder="event / city / country..." />
        </div>
        <div class="pill" id="lastUpdated">Last update: —</div>
      </div>
    </section>

    <section class="grid" id="grid"></section>
    <div class="empty" id="empty" style="display:none;">No events found.</div>

    <div class="footer">
      <div class="glow-line"></div>
      © 2025 LAILA. All rights reserved.
    </div>
  </main>

  <script>
    const grid = document.getElementById('grid');
    const empty = document.getElementById('empty');
    const q = document.getElementById('q');
    const lastUpdated = document.getElementById('lastUpdated');

    function escapeHtml(s){
      return String(s ?? '').replace(/[&<>"']/g, m => ({
        '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'
      }[m]));
    }

    function render(events){
      const query = (q.value || '').trim().toLowerCase();
      const filtered = events.filter(e=>{
        const hay = `${e.title} ${e.location} ${e.country} ${e.city}`.toLowerCase();
        return !query || hay.includes(query);
      });

      grid.innerHTML = filtered.map(e=>{
        const date = e.dateText || (e.startDate && e.endDate ? `${e.startDate} → ${e.endDate}` : (e.startDate || ''));
        const kind = e.discipline || 'Event';
        const link = e.url || '#';

        return `
          <article class="card">
            <div class="row">
              <div>
                <div class="title">${escapeHtml(e.title)}</div>
                <div class="meta">
                  <div><b>Date:</b> ${escapeHtml(date || '—')}</div>
                  <div><b>Location:</b> ${escapeHtml(e.location || [e.city,e.country].filter(Boolean).join(', ') || '—')}</div>
                  ${e.source ? `<div><b>Source:</b> ${escapeHtml(e.source)}</div>` : ``}
                </div>
              </div>
              <div class="tag">${escapeHtml(kind)}</div>
            </div>
            <div class="actions">
              <a class="btn" href="${escapeHtml(link)}" target="_blank" rel="noopener">Open</a>
              ${e.website ? `<a class="btn" href="${escapeHtml(e.website)}" target="_blank" rel="noopener">Website</a>` : ``}
            </div>
          </article>
        `;
      }).join('');

      empty.style.display = filtered.length ? 'none' : 'block';
    }

    async function load(){
      try{
        const res = await fetch('data/events.json', { cache: 'no-store' });
        if(!res.ok) throw new Error('events.json missing');
        const data = await res.json();

        if(data?.generatedAt){
          const d = new Date(data.generatedAt);
          lastUpdated.textContent = 'Last update: ' + (isNaN(d) ? data.generatedAt : d.toLocaleString());
        }

        const events = Array.isArray(data?.events) ? data.events : [];
        render(events);

        q.addEventListener('input', ()=>render(events));
      }catch(err){
        lastUpdated.textContent = 'Last update: —';
        grid.innerHTML = '';
        empty.style.display = 'block';
        empty.textContent = 'events.json not found yet. Run the workflow once to generate it.';
      }
    }

    load();
  </script>
</body>
</html>
